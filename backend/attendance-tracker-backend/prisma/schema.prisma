generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma" 
  moduleFormat = "esm"  
}

datasource db {
  provider = "postgresql"
  
}

model User {
  id          Int          @id @default(autoincrement())
  email       String       @unique
  name        String
  password    String
  attendances Attendance[]
  createdAt   DateTime     @default(now())
}

enum AttendanceType {
  OFFICE
  WFH
  LEAVE           
  PUBLIC_HOLIDAY 
}

model Attendance {
  id        Int            @id @default(autoincrement())
  date      DateTime       // Store as 00:00:00 for calendar alignment
  type      AttendanceType @default(WFH)
  userId    Int
  user      User           @relation(fields: [userId], references: [id])

  // This ensures a user can't have two entries for the same date
  @@unique([userId, date]) 
}